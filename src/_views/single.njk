{% extends "base.njk" %}

{% block content %}
    <div class="single">
        {% block single_content %}
            {{ content | safe }}
        {% endblock %}
    </div>
{% endblock %}

{% block foot %}
    <script>
        const setOverflow = (el) => {
            const hasOverflow = el.scrollWidth > el.clientWidth;
            el.classList.toggle('has-overflow', hasOverflow);
            const maxWidth = Math.min(el.scrollWidth, window.innerWidth);
            el.style.setProperty('--scrollWidth', `${maxWidth}px`);
        }
        document.addEventListener('DOMContentLoaded', () => {
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(it => setOverflow(it.target));
            });

           [...document.querySelectorAll('.snippet')].forEach(s => {
               observer.observe(s);
           });
        });
    </script>
{% endblock %}
